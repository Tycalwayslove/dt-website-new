import{b as v}from"./contact-bg-777aff36.js";import{l as b,e as E}from"./contact-location-7b268f0d.js";import{y as M,r as k,m as T,n as C,U as A,ar as R,z as _,A as h,B as s,K as x,E as L,u as f,O as g}from"./vendor-976643fc.js";const z=t=>typeof t=="string"?document.getElementById(t):t&&typeof t.value<"u"?t.value:t,S=t=>new Promise((l,o)=>{if(window.TMap){l();return}const r=document.getElementById("qqmap-script");if(r){r.addEventListener("load",()=>l()),r.addEventListener("error",()=>o(new Error("QQ Map script failed to load")));return}const i=document.createElement("script");i.id="qqmap-script",i.src=`https://map.qq.com/api/gljs?v=1.exp&key=${t}`,i.async=!0,i.onload=()=>l(),i.onerror=()=>o(new Error("QQ Map script failed to load")),document.head.appendChild(i)}),$=async(t,l,o)=>{const r=o?`region(${encodeURIComponent(o)},0)`:"nearby(22.53318,113.93042,10000)",i=`https://apis.map.qq.com/ws/place/v1/search?keyword=${encodeURIComponent(l)}&boundary=${r}&key=${t}`,n=await(await fetch(i)).json();return n&&n.status===0&&Array.isArray(n.data)&&n.data.length>0?n.data.find(e=>/科兴科学园/i.test(`${e.title} ${e.address||""}`))||n.data[0]:null},P=async(t,l,o)=>{var n;const r=`https://apis.map.qq.com/ws/geocoder/v1/?address=${encodeURIComponent(l)}&key=${t}`+(o?`&region=${encodeURIComponent(o)}`:""),a=await(await fetch(r)).json();return a&&a.status===0&&((n=a.result)!=null&&n.location)?a.result:null};async function U(t){const l="S3GBZ-H4PK4-MSTUY-K5LC5-5U5NQ-AZFVW";await S(l);const o=window.TMap,r=z(t.container);if(!r)throw new Error("Map container not found");const i=new o.LatLng(22.53318,113.93042),a=new o.Map(r,{center:i,zoom:t.zoom??16});let n=i.lat,c=i.lng,e=t.markerTitle||"公司位置",d=t.address;const m=await $(l,t.address,t.city);if(m&&m.location)n=m.location.lat,c=m.location.lng,e=m.title||e,d=m.address||d;else{const p=await P(l,t.address,t.city);p!=null&&p.location&&(n=p.location.lat,c=p.location.lng)}const u=new o.LatLng(n,c);a.setCenter(u);const w=new o.MultiMarker({map:a,styles:{company:new o.MarkerStyle({width:28,height:42,anchor:{x:14,y:42}})},geometries:[{id:"company",styleId:"company",position:u,properties:{title:e,address:d}}]}),y=new o.InfoWindow({map:a,position:u,content:`<div style="font-size:14px;"><strong>${e}</strong><br/>${d}</div>`});return y.close(),w.on("click",p=>{const I=p.geometry.position;y.setPosition(I),y.open()}),{map:a,marker:w,infoWindow:y,location:{lat:n,lng:c}}}const q={class:"bg-white"},B={class:"container mx-auto px-20 lg:px-20 py-20 hidden md:block"},V={class:"absolute inset-0 grid md:grid-cols-[6fr_3fr] lg:grid-cols-[3fr_2fr] xl:grid-cols-[1fr_1fr] gap-8 items-center p-20"},N={class:"h-full"},j={class:"flex flex-col justify-center space-y-3 text-white pl-10"},D={class:"text-base mt-2 flex items-center"},K=["src"],O={class:"text-base mt-2 flex items-center"},Q=["src"],W={class:"container block md:hidden px-4 py-8 space-y-4"},Y={class:"w-full relative"},H=["src"],Z={class:"absolute inset-0 flex items-center justify-center"},F={class:"px-6 py-4 bg-black/40 rounded-2xl text-center backdrop-blur-sm"},G={class:"mt-2 space-y-2"},J={class:"text-base text-white flex items-center justify-center"},X=["src"],ee={class:"text-base text-white flex items-center justify-center"},te=["src"],se={class:"w-full h-[260px] rounded-2xl overflow-hidden border border-gray-200"},ne="深圳市南山区粤海街道科兴科学园A1-10",ae=M({__name:"Contact",setup(t){const l=k(null),o=k(null);let r=null,i=null,a=null,n=null;return T(async()=>{try{await C();const c=async d=>{const m=d.value;if(!m)return;const u=window.getComputedStyle(m),w=m.getBoundingClientRect();if(!(u.display!=="none"&&u.visibility!=="hidden"&&w.width>0&&w.height>0))return;const p=await U({container:d,address:ne,city:"深圳市",zoom:16,markerTitle:"公司位置"});r=p.map,i=p.marker,a=p.infoWindow};await c(l),await c(o);const e=()=>{try{r&&typeof r.resize=="function"&&r.resize()}catch{}};n=e,window.addEventListener("resize",n),e()}catch(c){console.error("Init map failed:",c)}}),A(()=>{try{a&&a.close()}catch{}a=null;try{n&&window.removeEventListener("resize",n)}catch{}}),(c,e)=>{const d=R("fade-in-up");return _(),h("div",q,[s("section",B,[x((_(),h("div",{class:"w-full h-[580px] relative rounded-2xl overflow-hidden",style:L({backgroundImage:`url(${f(v)})`,backgroundSize:"cover",backgroundPosition:"center"})},[s("div",V,[x((_(),h("div",N,[s("div",{ref_key:"mapContainerRef",ref:l,class:"w-full h-full rounded-xl overflow-hidden border border-gray-200"},null,512)])),[[d,{delay:500}]]),x((_(),h("div",j,[e[2]||(e[2]=s("h2",{class:"text-3xl font-semibold"},"联系我们",-1)),e[3]||(e[3]=s("p",{class:"text-xl"},"喵呜AI",-1)),s("p",D,[s("img",{src:f(b),alt:"地址图标",class:"w-[17px] h-[20px] mr-2"},null,8,K),e[0]||(e[0]=g(" 深圳市南山区粤海街道科兴科学园A1-10 ",-1))]),s("p",O,[s("img",{src:f(E),alt:"邮箱图标",class:"w-[18px] h-[13px] mr-2"},null,8,Q),e[1]||(e[1]=g(" service@meupop.com ",-1))])])),[[d,{delay:800}]])])],4)),[[d,{delay:300}]])]),x((_(),h("section",W,[s("div",Y,[s("img",{src:f(v),alt:"联系背景图",class:"w-full h-[300px] object-cover rounded-2xl"},null,8,H),s("div",Z,[s("div",F,[e[6]||(e[6]=s("h2",{class:"text-2xl font-semibold text-white"},"联系我们",-1)),e[7]||(e[7]=s("p",{class:"text-base text-white"},"喵呜AI",-1)),s("div",G,[s("p",J,[s("img",{src:f(b),alt:"地址图标",class:"w-[17px] h-[20px] mr-2"},null,8,X),e[4]||(e[4]=g(" 深圳市南山区粤海街道科兴科学园A1-10 ",-1))]),s("p",ee,[s("img",{src:f(E),alt:"邮箱图标",class:"w-[18px] h-[13px] mr-2"},null,8,te),e[5]||(e[5]=g(" service@meupop.com ",-1))])])])])]),s("div",se,[s("div",{ref_key:"mobileMapContainerRef",ref:o,class:"w-full h-full"},null,512)])])),[[d,{delay:500}]])])}}});export{ae as default};
//# sourceMappingURL=Contact-68ab046d.js.map
